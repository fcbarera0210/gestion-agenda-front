---
import { createRipple, rippleClasses } from '../utils/ripple';
---
<button
  id="theme-toggle"
  type="button"
  aria-label="Cambiar tema"
  class={
    `${rippleClasses} text-2xl cursor-default hover:cursor-pointer p-2 rounded-lg`
  }
>
  <svg
    id="theme-icon"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    class="w-6 h-6 transition-transform duration-300 motion-reduce:transition-none"
  >
    <path d="M12 3v1" />
    <path d="M12 20v1" />
    <path d="M4.22 4.22l.7.7" />
    <path d="M18.36 18.36l.7.7" />
    <path d="M3 12h1" />
    <path d="M20 12h1" />
    <path d="M4.22 19.78l.7-.7" />
    <path d="M18.36 5.64l.7-.7" />
    <path d="M12 5a7 7 0 0 0 7 7 7 7 0 0 1-7 7 7 7 0 0 1 0-14z" />
  </svg>
</button>
<script>
  const btn = document.getElementById('theme-toggle');
  const icon = document.getElementById('theme-icon');

  const syncIcon = () =>
    icon?.classList.toggle('rotate-180', document.documentElement.classList.contains('dark'));
  syncIcon();

  btn?.addEventListener('click', (e) => {
    createRipple(e);
    const isDark = document.documentElement.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    syncIcon();
  });
</script>
